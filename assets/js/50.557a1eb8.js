(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{524:function(t,e,a){"use strict";a.r(e);var r=a(10),n=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"frontmatter-title"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[t._v("#")]),t._v(" "+t._s(t.$frontmatter.title))]),t._v(" "),e("h2",{attrs:{id:"first-steps"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#first-steps"}},[t._v("#")]),t._v(" First steps")]),t._v(" "),e("ul",[e("li",[t._v("Fill the next "),e("a",{attrs:{href:"https://frevvo-prod.princeton.edu/frevvo/web/tn/pu.nplc/u/5a6d697c-0163-4307-b751-fcc0742900a9/app/_sO14QHzSEemyQZ_M7RLPOg/formtype/_-XYdEEK2Eeqtf7JjRFmYDQ/popupform"}},[t._v("Datajoint host access form")])]),t._v(" "),e("li",[t._v("Fill the next "),e("a",{attrs:{href:"https://frevvo-prod.princeton.edu/frevvo/web/tn/pu.nplc/u/5a6d697c-0163-4307-b751-fcc0742900a9/app/_sO14QHzSEemyQZ_M7RLPOg/formtype/_b4L9oHz4EemyQZ_M7RLPOg/popupform"}},[t._v("PNI account form")])]),t._v(" "),e("li",[t._v("Clone repostiory:\n"),e("ul",[e("li",[t._v("For "),e("strong",[t._v("Python")]),t._v(": "),e("a",{attrs:{href:"https://github.com/BrainCOGS/U19-pipeline_python"}},[t._v("https://github.com/BrainCOGS/U19-pipeline_python")])]),t._v(" "),e("li",[t._v("For "),e("strong",[t._v("MATLAB")]),t._v(": "),e("a",{attrs:{href:"https://github.com/BrainCOGS/U19-pipeline-matlab"}},[t._v("https://github.com/BrainCOGS/U19-pipeline-matlab")])])])])]),t._v(" "),e("h2",{attrs:{id:"mount-file-server-volumes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mount-file-server-volumes"}},[t._v("#")]),t._v(" Mount file server volumes")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("There are several data files (behavior, imaging & electrophysiology) that are referenced in the database")])]),t._v(" "),e("li",[e("p",[t._v("To access these files you should mount PNI file server volumes on your system.")])]),t._v(" "),e("li",[e("p",[t._v("There are three main file servers across PNI where data is stored (braininit, Bezos & u19_dj)")])])]),t._v(" "),e("h3",{attrs:{id:"on-windows-systems"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#on-windows-systems"}},[t._v("#")]),t._v(" On windows systems")]),t._v(" "),e("ol",[e("li",[t._v('From Windows Explorer, select "Map Network Drive" and enter:')])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("\\\\cup.pni.princeton.edu\\braininit\\")]),t._v(" (for braininit)")]),t._v(" "),e("li",[e("code",[t._v("\\\\cup.pni.princeton.edu\\Bezos-center\\")]),t._v(" (for Bezos)")]),t._v(" "),e("li",[e("code",[t._v("\\\\cup.pni.princeton.edu\\u19_dj\\")]),t._v(" (for u19_dj)")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("Authenticate with your NetID and PU password (NOT your PNI password, which may be different). When prompted for your username, enter PRINCETON\\netid (note that PRINCETON can be upper or lower case) where netid is your PU NetID.")])]),t._v(" "),e("h3",{attrs:{id:"on-os-x-systems"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#on-os-x-systems"}},[t._v("#")]),t._v(" On OS X systems")]),t._v(" "),e("ol",[e("li",[t._v('Select "Go->Connect to Server..." from Finder and enter:')])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("smb://cup.pni.princeton.edu/braininit/")]),t._v(" (for braininit)")]),t._v(" "),e("li",[e("code",[t._v("smb://cup.pni.princeton.edu/Bezos-center/")]),t._v(" (for Bezos)")]),t._v(" "),e("li",[e("code",[t._v("smb://cup.pni.princeton.edu/u19_dj/")]),t._v(" (for u19_dj)")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("Authenticate with your NetID and PU password (NOT your PNI password, which may be different).")])]),t._v(" "),e("h3",{attrs:{id:"on-linux-systems"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#on-linux-systems"}},[t._v("#")]),t._v(" On Linux systems")]),t._v(" "),e("ol",[e("li",[t._v("Follow extra steps depicted in this: "),e("a",{attrs:{href:"https://npcdocs.princeton.edu/index.php/Mounting_the_PNI_file_server_on_your_desktop"}},[t._v("link")])])]),t._v(" "),e("h2",{attrs:{id:"db-access-for-python-repository"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#db-access-for-python-repository"}},[t._v("#")]),t._v(" DB Access for Python repository")]),t._v(" "),e("h3",{attrs:{id:"prerequisites"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[t._v("#")]),t._v(" Prerequisites")]),t._v(" "),e("details",[e("summary",[t._v("Click to expand details")]),t._v(" "),e("h4",{attrs:{id:"install-an-integrated-development-environment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-an-integrated-development-environment"}},[t._v("#")]),t._v(" Install an integrated development environment")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("DataJoint development and use can be done with a plain text editor in the\nterminal. However, an integrated development environment (IDE) can improve your\nexperience. Several IDEs are available.")])]),t._v(" "),e("li",[e("p",[t._v("In this setup example, we will use Microsoft's Visual Studio Code.\n"),e("a",{attrs:{href:"https://code.visualstudio.com/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("Installation instructions here."),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[t._v("Install the Jupyter extension for VS Code.")])])]),t._v(" "),e("h4",{attrs:{id:"install-a-virtual-environment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-a-virtual-environment"}},[t._v("#")]),t._v(" Install a virtual environment")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("A virtual environment allows you to install the packages required for a\nspecific project within an isolated environment on your computer.")])]),t._v(" "),e("li",[e("p",[t._v("It is highly recommended to create a virtual environment to run the workflow.")])]),t._v(" "),e("li",[e("p",[t._v("Conda and virtualenv are virtual environment managers and you can use either\noption.  Below are the commands for Conda.")])]),t._v(" "),e("li",[e("p",[t._v("If you are setting up the pipeline on your local machine follow the instructions below for Conda.  If you are using "),e("code",[t._v("spock.pni.princeton.edu")]),t._v(" or "),e("code",[t._v("scotty.pni.princeton.edu")]),t._v(", Conda is preinstalled and you can access it by running "),e("code",[t._v("module load anacondapy/2021.11")]),t._v(".")])]),t._v(" "),e("li",[e("p",[t._v("We will install Miniconda which is a minimal installer for conda.")])]),t._v(" "),e("li",[e("p",[t._v("Select the "),e("a",{attrs:{href:"https://conda.io/en/latest/miniconda.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Miniconda installer link"),e("OutboundLink")],1),t._v(" for your operating system and follow the instructions.")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("You may need to add the Miniconda directory to the PATH environment\nvariable")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("First locate the Miniconda directory")])]),t._v(" "),e("li",[e("p",[t._v("Then modify and run the following command")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<absolute-path-to-miniconda-directory>/bin:'),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v('"')]),t._v("\n")])])])])])]),t._v(" "),e("li",[e("p",[t._v("Create a new conda environment")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Type the following command into a terminal window")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("conda create "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("environment_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("python")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("version"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v("Example command to create a conda environment")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("conda create "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("environment_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("python")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.9")]),t._v("\n")])])])])])]),t._v(" "),e("li",[e("p",[t._v("Activate the conda environment")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("conda activate "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("environment_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])])]),t._v(" "),e("h4",{attrs:{id:"other-installs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#other-installs"}},[t._v("#")]),t._v(" Other installs")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Git:")]),t._v(" Linux and Mac operating systems have Git preinstalled. If running in Windows get "),e("a",{attrs:{href:"https://gitforwindows.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("li",[e("strong",[t._v("Graphviz:")]),t._v(" To display DataJoint Diagrams, "),e("a",{attrs:{href:"https://graphviz.org/download/",target:"_blank",rel:"noopener noreferrer"}},[t._v("install graphviz"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("li",[t._v("Clone the "),e("a",{attrs:{href:"https://github.com/BrainCOGS/U19-pipeline_python"}},[t._v("U19-pipeline_python repository")])])])])])]),t._v(" "),e("h3",{attrs:{id:"first-time-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#first-time-configuration"}},[t._v("#")]),t._v(" First time configuration")]),t._v(" "),e("ul",[e("li",[t._v("The following instructions will configure DJ and connect to DB.")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("conda activate "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("environment_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" U19-pipeline_python\npip "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\npython initial_conf.py\n")])])]),e("p",[t._v("(Username and password will be prompted at this moment: Princeton NETiD & NetiD password usually works)")]),t._v(" "),e("ul",[e("li",[t._v("The "),e("code",[t._v("initial_conf.py")]),t._v("  script will store a local file with credtentials to access DB and configuration variables/filepaths.")]),t._v(" "),e("li",[t._v("Now that the virtual modules are created to access the tables in the database, you can query and fetch from the database.")])]),t._v(" "),e("h3",{attrs:{id:"connection-after-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#connection-after-configuration"}},[t._v("#")]),t._v(" Connection after configuration")]),t._v(" "),e("ul",[e("li",[t._v("The following instructions will load DJ configuration and connect to DB")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("conda activate "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("environment_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\npython\nfrom scripts.conf_file_finding "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" try_find_conf_file\ntry_find_conf_file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" datajoint as dj\ndj.conn"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h2",{attrs:{id:"db-access-for-matlab-repository"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#db-access-for-matlab-repository"}},[t._v("#")]),t._v(" DB Access for MATLAB repository")]),t._v(" "),e("h3",{attrs:{id:"prerequisites-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites-2"}},[t._v("#")]),t._v(" Prerequisites")]),t._v(" "),e("details",[e("summary",[t._v("Click to expand details")]),t._v(" "),e("ul",[e("li",[t._v("Install DataJoint for MATLAB")]),t._v(" "),e("li",[t._v("Utilize MATLAB built-in GUI i.e. Top Ribbon -> Add-Ons -> Get Add-Ons")]),t._v(" "),e("li",[t._v("Search, select, and install DataJoint")]),t._v(" "),e("li",[t._v("Clone the "),e("a",{attrs:{href:"https://github.com/BrainCOGS/U19-pipeline-matlab"}},[t._v("U19-pipeline-matlab repository")])])])]),t._v(" "),e("h3",{attrs:{id:"first-time-configuration-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#first-time-configuration-2"}},[t._v("#")]),t._v(" First time configuration")]),t._v(" "),e("ul",[e("li",[t._v("Add this repository to MATLAB Path or cd to this repository folder.")]),t._v(" "),e("li",[t._v("Run "),e("code",[t._v("dj_initial_conf(1)")])]),t._v(" "),e("li",[t._v("Insert user and password for the DB")])]),t._v(" "),e("p",[e("strong",[t._v("Note")]),t._v(" if you are configuring repository on a public computer, there are two options:")]),t._v(" "),e("ul",[e("li",[t._v("Run"),e("code",[t._v("dj_initial_conf(0)")]),t._v(" instead, to not store user & pass in configuration file.")]),t._v(" "),e("li",[t._v("Run"),e("code",[t._v("dj_initial_conf(1)")]),t._v(" and login to the DB with a public user like u19tech.")])]),t._v(" "),e("h3",{attrs:{id:"connection-after-configuration-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#connection-after-configuration-2"}},[t._v("#")]),t._v(" Connection after configuration")]),t._v(" "),e("ul",[e("li",[t._v("Add this repository to MATLAB Path or cd to this repository folder.")]),t._v(" "),e("li",[e("code",[t._v("connect_datajoint00")])])]),t._v(" "),e("h2",{attrs:{id:"db-access-for-matlab-repository-cluster-computing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#db-access-for-matlab-repository-cluster-computing"}},[t._v("#")]),t._v(" DB Access for MATLAB repository (cluster computing)")]),t._v(" "),e("h3",{attrs:{id:"prerequisites-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites-3"}},[t._v("#")]),t._v(" Prerequisites")]),t._v(" "),e("details",[e("summary",[t._v("Click to expand details")]),t._v(" "),e("ul",[e("li",[t._v("Clone the "),e("a",{attrs:{href:"https://github.com/BrainCOGS/U19-pipeline-matlab"}},[t._v("U19-pipeline-matlab repository")])]),t._v(" "),e("li",[t._v("Create a directory on same location named "),e("code",[t._v("datajoint_matlab_libs")])]),t._v(" "),e("li",[t._v("Change directory to "),e("code",[t._v("datajoint_matlab_libs")]),t._v(" and clone the following repositories:\n"),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/datajoint/datajoint-matlab.git"}},[t._v("https://github.com/datajoint/datajoint-matlab.git")])]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/datajoint/mym.git"}},[t._v("https://github.com/datajoint/mym.git")])]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/datajoint/GHToolbox.git"}},[t._v("https://github.com/datajoint/GHToolbox.git")])]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/guzman-raphael/compareVersions.git"}},[t._v("https://github.com/guzman-raphael/compareVersions.git")])])])])])]),t._v(" "),e("h3",{attrs:{id:"first-time-configuration-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#first-time-configuration-3"}},[t._v("#")]),t._v(" First time configuration")]),t._v(" "),e("ul",[e("li",[t._v("Add this repository to MATLAB Path")]),t._v(" "),e("li",[t._v("Run "),e("code",[t._v("startup_virtual_machine.m")])]),t._v(" "),e("li",[t._v("Run "),e("code",[t._v("dj_initial_conf(1)")])]),t._v(" "),e("li",[t._v("Insert user and password for the DB")])]),t._v(" "),e("p",[e("strong",[t._v("Note")]),t._v(" if you are configuring repository on a public computer, there are two options:")]),t._v(" "),e("ul",[e("li",[t._v("Run"),e("code",[t._v("dj_initial_conf(0)")]),t._v(" instead, to not store user & pass in configuration file.")]),t._v(" "),e("li",[t._v("Run"),e("code",[t._v("dj_initial_conf(1)")]),t._v(" and login to the DB with a public user like u19tech.")])]),t._v(" "),e("h3",{attrs:{id:"connection-after-configuration-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#connection-after-configuration-3"}},[t._v("#")]),t._v(" Connection after configuration")]),t._v(" "),e("ul",[e("li",[t._v("Add this repository to MATLAB Path")]),t._v(" "),e("li",[t._v("Run "),e("code",[t._v("startup_virtual_machine.m")])])]),t._v(" "),e("h2",{attrs:{id:"add-researcher-to-user-table"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#add-researcher-to-user-table"}},[t._v("#")]),t._v(" Add researcher to user table")]),t._v(" "),e("ul",[e("li",[t._v("This set of instructions only apply for users that will have subjects on his/her supervision:")])]),t._v(" "),e("h3",{attrs:{id:"add-researcher-to-user-table-with-matlab"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#add-researcher-to-user-table-with-matlab"}},[t._v("#")]),t._v(" Add researcher to user table with MATLAB")]),t._v(" "),e("ul",[e("li",[t._v("Connect to DB")]),t._v(" "),e("li",[t._v("Run "),e("code",[t._v("lab.utils.add_researcher_user_table('NETID', 'full name', 'email', 'phone')")])]),t._v(" "),e("li",[e("strong",[t._v("Note:")]),t._v(" (All data in function call should be written inside quotes)")])]),t._v(" "),e("h3",{attrs:{id:"add-researcher-to-user-table-with-python"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#add-researcher-to-user-table-with-python"}},[t._v("#")]),t._v(" Add researcher to user table with PYTHON")]),t._v(" "),e("ul",[e("li",[t._v("Activate conda environment and start a python command line")]),t._v(" "),e("li",[e("code",[t._v("import u19_pipeline.utils.insert_miscelaneous_db as imd")]),t._v(" "),e("code",[t._v("imd.add_researcher_user_table('NETID', 'full name', 'email', 'phone')")])]),t._v(" "),e("li",[e("strong",[t._v("Note:")]),t._v(" (All data in function call should be written inside quotes)")])])])}),[],!1,null,null,null);e.default=n.exports}}]);