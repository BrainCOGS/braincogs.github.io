<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Pupillometry | BRAIN CoGS mini VR rigs</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Documentation for virtual reality rigs at Princeton BRAIN CoGS project">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.6e54da3e.css" as="style"><link rel="preload" href="/assets/js/app.2e1d0086.js" as="script"><link rel="preload" href="/assets/js/2.f73e3e1e.js" as="script"><link rel="preload" href="/assets/js/1.c51b9512.js" as="script"><link rel="preload" href="/assets/js/43.836fbed0.js" as="script"><link rel="prefetch" href="/assets/js/10.28ab9cf5.js"><link rel="prefetch" href="/assets/js/11.b8e01274.js"><link rel="prefetch" href="/assets/js/12.01f9d7cf.js"><link rel="prefetch" href="/assets/js/13.3e4bb9d9.js"><link rel="prefetch" href="/assets/js/14.4280d58e.js"><link rel="prefetch" href="/assets/js/15.c2481de1.js"><link rel="prefetch" href="/assets/js/16.0d27a42c.js"><link rel="prefetch" href="/assets/js/17.bf76a0f7.js"><link rel="prefetch" href="/assets/js/18.219da49e.js"><link rel="prefetch" href="/assets/js/19.8e1d46db.js"><link rel="prefetch" href="/assets/js/20.aa1d6fa3.js"><link rel="prefetch" href="/assets/js/21.1931c23e.js"><link rel="prefetch" href="/assets/js/22.796e9949.js"><link rel="prefetch" href="/assets/js/23.cc03e5ad.js"><link rel="prefetch" href="/assets/js/24.f1842dd7.js"><link rel="prefetch" href="/assets/js/25.1cc0ff2e.js"><link rel="prefetch" href="/assets/js/26.bf610798.js"><link rel="prefetch" href="/assets/js/27.34d9178c.js"><link rel="prefetch" href="/assets/js/28.27e8c12c.js"><link rel="prefetch" href="/assets/js/29.13b12301.js"><link rel="prefetch" href="/assets/js/3.e8951f3a.js"><link rel="prefetch" href="/assets/js/30.75a380a5.js"><link rel="prefetch" href="/assets/js/31.e245e83a.js"><link rel="prefetch" href="/assets/js/32.9fca9676.js"><link rel="prefetch" href="/assets/js/33.0e3bba28.js"><link rel="prefetch" href="/assets/js/34.220cdeed.js"><link rel="prefetch" href="/assets/js/35.ecdec2a2.js"><link rel="prefetch" href="/assets/js/36.758a67d9.js"><link rel="prefetch" href="/assets/js/37.f2b19388.js"><link rel="prefetch" href="/assets/js/38.ddeff521.js"><link rel="prefetch" href="/assets/js/39.dd78eec6.js"><link rel="prefetch" href="/assets/js/4.8d93e77a.js"><link rel="prefetch" href="/assets/js/40.080bf08b.js"><link rel="prefetch" href="/assets/js/41.b5e0bbd1.js"><link rel="prefetch" href="/assets/js/42.8fd55afd.js"><link rel="prefetch" href="/assets/js/44.7558313c.js"><link rel="prefetch" href="/assets/js/45.98c02387.js"><link rel="prefetch" href="/assets/js/46.f7863950.js"><link rel="prefetch" href="/assets/js/47.58ee2c27.js"><link rel="prefetch" href="/assets/js/48.baf53650.js"><link rel="prefetch" href="/assets/js/49.5a74915a.js"><link rel="prefetch" href="/assets/js/5.6ffcefef.js"><link rel="prefetch" href="/assets/js/50.557a1eb8.js"><link rel="prefetch" href="/assets/js/51.6351139d.js"><link rel="prefetch" href="/assets/js/52.9cb0c7c8.js"><link rel="prefetch" href="/assets/js/6.f914edf2.js"><link rel="prefetch" href="/assets/js/7.ea5c102c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d116d088.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6e54da3e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">BRAIN CoGS mini VR rigs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/building/" class="nav-link router-link-active">
  Building
</a></div><div class="nav-item"><a href="/maintenance/" class="nav-link">
  Maintenance
</a></div><div class="nav-item"><a href="/software/" class="nav-link">
  Software
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/building/" class="nav-link router-link-active">
  Building
</a></div><div class="nav-item"><a href="/maintenance/" class="nav-link">
  Maintenance
</a></div><div class="nav-item"><a href="/software/" class="nav-link">
  Software
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/building/" aria-current="page" class="sidebar-link">Building a mini VR rig</a></li><li><a href="/building/cabinet.html" class="sidebar-link">Cabinet</a></li><li><a href="/building/stage.html" class="sidebar-link">Stage</a></li><li><a href="/building/air-supply.html" class="sidebar-link">Air supply</a></li><li><a href="/building/positioning.html" class="sidebar-link">Positioning</a></li><li><a href="/building/projection.html" class="sidebar-link">Projection</a></li><li><a href="/building/reward.html" class="sidebar-link">Reward</a></li><li><a href="/building/air-puffs.html" class="sidebar-link">Air puffs</a></li><li><a href="/building/control.html" class="sidebar-link">Control</a></li><li><a href="/building/pupillometry.html" aria-current="page" class="active sidebar-link">Pupillometry</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/building/pupillometry.html#camera-set-up" class="sidebar-link">Camera set up</a></li><li class="sidebar-sub-header"><a href="/building/pupillometry.html#light-source-set-up" class="sidebar-link">Light source set up</a></li><li class="sidebar-sub-header"><a href="/building/pupillometry.html#image-focus-and-camera-positioning" class="sidebar-link">Image focus and camera positioning</a></li><li class="sidebar-sub-header"><a href="/building/pupillometry.html#explanation-of-the-processing-and-how-to-set-up-the-pipeline" class="sidebar-link">Explanation of the processing and how to set up the pipeline</a></li></ul></li><li><a href="/building/lick-detection.html" class="sidebar-link">Lick detection</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="frontmatter-title"><a href="#frontmatter-title" class="header-anchor">#</a> Pupillometry</h1> <p>The pupillometry module consist on a monochrome camera mounted at the side of the screen pointing laterally to the face of the mice, the lens used allows to frame the pupil with enough detail to be processed by markeless pose estimation software. The field of view obtained with the lens allows to track sniffing and whisking, altough that is out of the scope of this building guide.</p> <h2 id="camera-set-up"><a href="#camera-set-up" class="header-anchor">#</a> Camera set up</h2> <p>We use a Teledyne FLIR FFY-U3-04S2M-S camera, the small factor allows to place it right below the aluminum plate holding the screen without taking much space on the rig. We use a 0.4 MP, 121 FPS, monochromatic camera with an IR light source; a mono camera has better sensitivity and allow us to capture the details of the pupil better than the color sensor. Despite the fact that pupillometry can be detected at 30 Hz, we decided to use a 0.4 MP 121 FPS camera to have the flexibility in case we need another kind of measurement (whiskers move), but using the 1.6 MP 60 FPS camera should work fine for pupillometry and should result in a better image resolution.</p> <ol><li>Make a 1&quot; hole on the screen at the position showed below. If you're setting up a pupillometry module on a built screen first mark the position where the hole is going to be made, then use a precision knife to remove the outer part of the screen (make sure not to introduce the knife all the way into the other side), remove the outer part using your fingers and then use your fingers to remove the styrofoam up to the inner part of the screen (the paint layer). Then, use the precision knife to cut the paint layer in the inner part of the screen, this way the hole from the inside out will be cleaner and the smaller size possible (it will adjust to the diameter of the lens).</li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Despite the fact that the screen has a hole in one of the sides, we didn't observe any behavioral impact in any of the pilot -or subsequent- sessions. The position and the fact that the hole is tailored to the diameter of the lens can be the reason.</p></div> <figure><img src="/assets/img/pupillometry-1.ffd80c5b.png"></figure> <ol start="2"><li>Set up the camera and position it on the aluminum plate.</li></ol> <ol start="3"><li>Connect it to the computer.</li></ol> <h2 id="light-source-set-up"><a href="#light-source-set-up" class="header-anchor">#</a> Light source set up</h2> <p>Explain how to set up the light source at the top of the rig.</p> <h2 id="image-focus-and-camera-positioning"><a href="#image-focus-and-camera-positioning" class="header-anchor">#</a> Image focus and camera positioning</h2> <p>Explain step by step how to focus the image and screw all the parts to get the camera in position.</p> <h2 id="explanation-of-the-processing-and-how-to-set-up-the-pipeline"><a href="#explanation-of-the-processing-and-how-to-set-up-the-pipeline" class="header-anchor">#</a> Explanation of the processing and how to set up the pipeline</h2> <p>Check <a href="https://braincogs.github.io/software/pupillometry_guide.html"> Pupillometry Pipeline Guide </a> for more information.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/building/control.html" class="prev">
        Control
      </a></span> <span class="next"><a href="/building/lick-detection.html">
        Lick detection
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.2e1d0086.js" defer></script><script src="/assets/js/2.f73e3e1e.js" defer></script><script src="/assets/js/1.c51b9512.js" defer></script><script src="/assets/js/43.836fbed0.js" defer></script>
  </body>
</html>
